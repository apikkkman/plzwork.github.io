<!DOCTYPE html>
<html lang="ru">
<head>
	<meta charset="UTF-8">
	<title>Faun</title>
	
	<link rel="stylesheet" href="fonts/ofont.ru_bebas_neue_thin.ttf">
	<link rel="stylesheet" href="css/main.css">
  <link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
  <script defer src="./jojo.js"></script> 
    <style>
        *{
	padding: 0;
	margin: 0;
}
body{
	font-family: 'Montserrat',sans-serif;
  background-color: #fff890;
}

.header{
    height: auto;
    overflow: hidden;
    background-color: #15263b;
}

.container{
    width: 100%;
	width: auto;
	margin: 0 auto;
    display: flex;
    flex-direction: row;
}

.navbar {
    overflow: hidden;
    width: 90%;
    height: 150px;
	  margin: 0 auto;
    display: flex;
    flex-direction: column;
}

@media (min-width:300px) and (max-width:700px) {
  .navbar {
    float: none;
    width:100%;
	display: flex;
	flex-flow: row wrap;
  }
}

.navbar a {
    float: right;
    font-size: 16px;
    display: inline;
    color: white;
    text-align: center;
    padding: 14px 16px;
    text-decoration: none;
    position: relative;
    
}

.dropdown {
    float: right;
    overflow: hidden;
}

.dropdown .dropbtn {
    font-size: 16px;    
    border: none;
    outline: none;
    color: white;
    background-color: inherit;
    font-family: inherit;
    padding: 14px 16px;
    margin: 0;
    position: relative;
}


.dropdown-content {
    display: none;
    position: absolute;
    background-color: #f9f9f9;
    min-width: 160px;
    box-shadow: 0px 8px 16px 0px rgba(172, 32, 32, 0.2);
    z-index: 1;
}

.dropdown-content a {
    float: none;
    color: black;
    padding: 12px 16px;
    text-decoration: none;
    display: block;
    text-align: left;
}

.dropdown-content a:hover {
    background-color: #ddd;
}

.dropdown:hover .dropdown-content {
    display: block;
}

.footer {
  padding: 20px;
  text-align: left;
  background: #c0ba62;
  color:#ffffff;
  float: right;
  text-decoration: none;
  width:98%;
}
.footer a{
  color: #ffffff;
  text-align: left;
  display: inline;
    flex-direction: row;
  position: relative;
  text-decoration: none;
}

.cont{
    float: right;
    display: inline;
}

.gal{
    text-align: center;
    display: flex;
  justify-content: center;
}

.portfolio-section {
    display: grid;
    flex-wrap:wrap;
    justify-content:center;
    gap:20px; 
    margin: 20px 0; 
    grid-template-columns: repeat(4, 1fr); 
    grid-gap: 10px; 
}    

.portfolio-item {
    display: grid; 
    min-height: 32vh; 
    background-size: cover; 
    background-position: center; 
    text-align: center; 
    color: red;
    
}    

.portfolio-item:nth-child(1) {
  grid-column: 1;
  grid-row: 1/3; 
  }    

.portfolio-item:nth-child(4) {
    grid-column: 1/3; 
}  

.portfolio-item:nth-child(3) {
  grid-column: 1/3; 
  }    

.pypy{
  position: relative;
}

  .mySlides {
  display: none;
  text-align: center;
}

/* Добавление указателя при наведении указателя мыши на миниатюры изображений */
.cursor {
  cursor: pointer;
}

/* Вперед и назад кнопки */
.prev,
.next {
  position: absolute;
  top:40%;
  background: #000000;
  color: #ffffff;
  border: none;
  padding: 10px 20px;
  border-radius: 16px;
  cursor: pointer;
}

/* Расположите кнопку "вперед" справа */
.next {
  right: 0;
  border-radius: 16px;
}
.prev{
  left:0;
  border-radius: 16px;
}

/* При наведении курсора мыши добавьте черный цвет фона с небольшим прозрачным слоем */
.prev:hover,
.next:hover {
  background-color: rgba(0, 0, 0, 0.8);
}

/* Номер текста (1/3 и т.д.) */
.numbertext {
  color: #f2f2f2;
  font-size: 12px;
  padding: 8px 12px;
  position: absolute;
  top: 0;
}

/* Контейнер для текста изображения */
.caption-container {
  text-align: center;
  background-color: #222;
  padding: 2px 16px;
  color: white;
}

.row:after {
  content: "";
  display: table;
  clear: both;
}

/* Шесть колонн бок о бок */
.column {
  float: left;
  width: 12.5%;
}

/* Добавьте эффект прозрачности для миниатюрных изображений */
.demo {
  opacity: 0.3;
  width:185.3px;
  height:150px;
}
.dot {
  cursor: pointer;
  height: 15px;
  width: 15px;
  margin: 0 2px;
  background-color: #b4c721;
  border-radius: 50%;
  display: inline-block;
  transition: background-color 0.6s ease;
}

.active,
.demo:hover {
  opacity: 1;
}

.container2 {
    width: 90%;
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

.subtitle {
    font-size: 18px;
    margin-bottom: 30px;
    color: #777;
}

.services {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    text-align: left;
}

/* Блок услуги */
.service-item {
    background: white;
    border-radius: 8px;
    padding: 20px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    transition: box-shadow 0.3s ease-in-out;
}

.service-item:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

.service-item img {
    width: 40px;
    height: 40px;
    margin-bottom: 15px;
}

.service-item h3 {
    font-size: 16px;
    line-height: 1.5;
    color: #333;
}

.team-container {
    width: 90%;
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

.team-title {
    font-size: 32px;
    margin-bottom: 20px;
}

/* Сетка команды */
.team-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 30px;
    margin-top: 20px;
}

/* Член команды */
.team-member {
    background: #fff;
    border-radius: 8px;
    padding: 15px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    text-align: center;
    transition: transform 0.3s ease;
}

.team-member:hover {
    transform: translateY(-5px);
}

.team-member img {
    width: 150px;
    height: 150px;
    border-radius: 50%;
    object-fit: cover;
    margin-bottom: 15px;
}

.team-member h3 {
    font-size: 18px;
    margin: 0 0 10px;
    color: #333;
}

.team-member p {
    font-size: 14px;
    margin: 5px 0;
}

.team-meta {
    color: #777;
    font-size: 12px;
}

.video-bg {
    position: absolute;
    float: right;
    width: 92%;
    height: 150px;
    object-fit: cover;
    
    display: flex;
}

    </style>
</head>
<body>
  <div class="container2">

    <h1>Панель администратора</h1>
    
    <?php if (!empty($messages)): ?>
      <div>
        <?php foreach ($messages as $msg): ?>
          <?= htmlspecialchars($msg) ?><br>
        <?php endforeach; ?>
      </div>
    <?php endif; ?>
    
    <section>
      <h2>Статистика по языкам программирования</h2>
      <ul>
        <?php foreach ($lang_stats as $lang => $count): ?>
          <li><strong><?= htmlspecialchars($lang) ?></strong>: <?= intval($count) ?></li>
        <?php endforeach; ?>
      </ul>
      <p><strong>Всего заявок:</strong> <?= count($users) ?></p>
    </section>
    
    <section>
      <h2>Заявки</h2>
      <?php if (empty($users)): ?>
        <p>Заявки не найдены.</p>
      <?php else: ?>
        <table border="1" cellpadding="4" cellspacing="0">
          <thead>
            <tr>
              <th>ID</th>
              <th>Имя</th>
              <th>Телефон</th>
              <th>Email</th>
              <th>Дата рождения</th>
              <th>Пол</th>
              <th>Биография</th>
              <th>Любимые ЯП</th>
              <th>Согласие</th>
              <th>Действия</th>
            </tr>
          </thead>
          <tbody>
          <?php foreach ($users as $user): 
            $id = $user['id'];
            $languages = json_decode($user['languages'], true) ?: [];
            ?>
            <tr>
              <td><?= htmlspecialchars($id) ?></td>
              <td><?= htmlspecialchars($user['name']) ?></td>
              <td><?= htmlspecialchars($user['phone']) ?></td>
              <td><?= htmlspecialchars($user['email']) ?></td>
              <td><?= htmlspecialchars($user['birthday']) ?></td>
              <td><?= ($user['gender'] === 'male') ? 'Мужской' : (($user['gender'] === 'female') ? 'Женский' : '') ?></td>
              <td><?= nl2br(htmlspecialchars($user['bio'])) ?></td>
              <td><?= htmlspecialchars(implode(', ', $languages)) ?></td>
              <td><?= $user['agreement'] ? 'Да' : 'Нет' ?></td>
              <td>
                <details>
                  <summary>Редактировать</summary>
                  <form method="post" action="admin.php" novalidate>
                    <input type="hidden" name="user_id" value="<?= htmlspecialchars($id) ?>">
                    <input type="hidden" name="edit" value="1">
                    <div>
                      <label for="name_<?= htmlspecialchars($id) ?>">Имя</label><br/>
                      <input type="text" id="name_<?= htmlspecialchars($id) ?>" name="name" value="<?= htmlspecialchars($user['name']) ?>" required>
                    </div>
                    <div>
                      <label for="phone_<?= htmlspecialchars($id) ?>">Телефон</label><br/>
                      <input type="tel" id="phone_<?= htmlspecialchars($id) ?>" name="phone" value="<?= htmlspecialchars($user['phone']) ?>">
                    </div>
                    <div>
                      <label for="email_<?= htmlspecialchars($id) ?>">Email</label><br/>
                      <input type="email" id="email_<?= htmlspecialchars($id) ?>" name="email" value="<?= htmlspecialchars($user['email']) ?>" required>
                    </div>
                    <div>
                      <label for="birthday_<?= htmlspecialchars($id) ?>">Дата рождения</label><br/>
                      <input type="date" id="birthday_<?= htmlspecialchars($id) ?>" name="birthday" value="<?= htmlspecialchars($user['birthday']) ?>">
                    </div>
                    <div>
                      <label>Пол</label><br/>
                      <label><input type="radio" name="gender" value="male" <?= ($user['gender'] === 'male') ? 'checked' : '' ?>> Мужской</label>
                      <label><input type="radio" name="gender" value="female" <?= ($user['gender'] === 'female') ? 'checked' : '' ?>> Женский</label>
                    </div>
                    <div>
                      <label for="bio_<?= htmlspecialchars($id) ?>">Биография</label><br/>
                      <textarea id="bio_<?= htmlspecialchars($id) ?>" name="bio"><?= htmlspecialchars($user['bio']) ?></textarea>
                    </div>
                    <div>
                      <label>Любимые ЯП</label><br/>
                      <?php foreach ($langs as $lang_option): ?>
                        <label>
                          <input type="checkbox" name="languages[]" value="<?= htmlspecialchars($lang_option) ?>" <?= in_array($lang_option, $languages) ? 'checked' : '' ?>>
                          <?= htmlspecialchars($lang_option) ?>
                        </label><br/>
                      <?php endforeach; ?>
                    </div>
                    <div>
                      <label><input type="checkbox" name="agreement" <?= $user['agreement'] ? 'checked' : '' ?>> Согласие с договором</label>
                    </div>
                    <div>
                      <button type="submit">Сохранить</button>
                    </div>
                  </form>
                </details>
                <form method="post" action="admin.php" onsubmit="return confirm('Удалить заявку #<?= htmlspecialchars($id) ?>?');" style="margin-top: 5px;">
                  <input type="hidden" name="user_id" value="<?= htmlspecialchars($id) ?>">
                  <input type="hidden" name="delete" value="1">
                  <button type="submit">Удалить</button>
                </form>
              </td>
            </tr>
          <?php endforeach; ?>
          </tbody>
        </table>
      <?php endif; ?>
    </section>
    
    </div>
</body>
</html>
